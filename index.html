import { useState, useEffect } from 'react';
import { Check } from 'lucide-react';

const colorSystem = {
  brand: {
    creator: { name: 'Creator Neon', hex: '#E5FF00' },
    gradients: [
      { name: 'Gradient 1', colors: ['#F1FF73', '#E5FF00'] },
      { name: 'Gradient 2', colors: ['#F1FF73', '#E5FF00'] },
    ],
    output2026: [
      { name: 'Black', hex: '#0D0E0F' },
      { name: 'Creator Neon', hex: '#E5FF00' },
      { name: 'Buttermilk', hex: '#F1E7D1' },
      { name: 'Buttermilk II', hex: '#E5DBC7' },
      { name: 'White', hex: '#FFFFFF' },
      { name: 'Output Purple', hex: '#8710FC' },
      { name: 'Brown I', hex: '#6B655D' },
      { name: 'Brown II', hex: '#B8BF5D' },
    ],
  },
  creatorNeon: {
    shades: [
      { name: 'Creator Neon 0', hex: '#E5FF00' },
      { name: 'Creator Neon 10', hex: '#CFE600' },
      { name: 'Creator Neon 20', hex: '#B8CC00' },
      { name: 'Creator Neon 30', hex: '#A2B300' },
      { name: 'Creator Neon 40', hex: '#8B9900' },
      { name: 'Creator Neon 50', hex: '#758000' },
      { name: 'Creator Neon 60', hex: '#5E6600' },
      { name: 'Creator Neon 70', hex: '#484D00' },
      { name: 'Creator Neon 80', hex: '#313300' },
      { name: 'Creator Neon 90', hex: '#1B1A00' },
    ],
    tints: [
      { name: 'Creator Neon tint 100', hex: '#E5FF00' },
      { name: 'Creator Neon tint 90', hex: '#E8FF1A' },
      { name: 'Creator Neon tint 80', hex: '#EAFF33' },
      { name: 'Creator Neon tint 70', hex: '#EDFF4D' },
      { name: 'Creator Neon tint 60', hex: '#EFFF66' },
      { name: 'Creator Neon tint 50', hex: '#F2FF80' },
      { name: 'Creator Neon tint 40', hex: '#F5FF99' },
      { name: 'Creator Neon tint 30', hex: '#F7FFB3' },
      { name: 'Creator Neon tint 20', hex: '#FAFFCC' },
      { name: 'Creator Neon tint 10', hex: '#FCFFE6' },
    ],
  },
  saturated: {
    green: [
      { name: 'Green 0', hex: '#39D353' }, { name: 'Green 10', hex: '#2BBD41' }, { name: 'Green 20', hex: '#23A835' },
      { name: 'Green 30', hex: '#1B932A' }, { name: 'Green 40', hex: '#157D21' }, { name: 'Green 50', hex: '#106818' },
      { name: 'Green 60', hex: '#0B5310' }, { name: 'Green 70', hex: '#073E09' }, { name: 'Green 80', hex: '#042A05' }, { name: 'Green 90', hex: '#021502' }
    ],
    purple: [
      { name: 'Purple 0', hex: '#C4B5FD' }, { name: 'Purple 10', hex: '#B5A3F7' }, { name: 'Purple 20', hex: '#A691F1' },
      { name: 'Purple 30', hex: '#977FEB' }, { name: 'Purple 40', hex: '#886DE5' }, { name: 'Purple 50', hex: '#795BDF' },
      { name: 'Purple 60', hex: '#6A49D9' }, { name: 'Purple 70', hex: '#5B37D3' }, { name: 'Purple 80', hex: '#4C25CD' }, { name: 'Purple 90', hex: '#3D13C7' }
    ],
    pink: [
      { name: 'Pink 0', hex: '#F472B6' }, { name: 'Pink 10', hex: '#ED5FA8' }, { name: 'Pink 20', hex: '#E64C9A' },
      { name: 'Pink 30', hex: '#DF398C' }, { name: 'Pink 40', hex: '#D8267E' }, { name: 'Pink 50', hex: '#D11370' },
      { name: 'Pink 60', hex: '#CA0062' }, { name: 'Pink 70', hex: '#C30054' }, { name: 'Pink 80', hex: '#BC0046' }, { name: 'Pink 90', hex: '#B50038' }
    ],
    orange: [
      { name: 'Orange 0', hex: '#FB923C' }, { name: 'Orange 10', hex: '#F5812B' }, { name: 'Orange 20', hex: '#EF701A' },
      { name: 'Orange 30', hex: '#E95F09' }, { name: 'Orange 40', hex: '#E34E00' }, { name: 'Orange 50', hex: '#DD3D00' },
      { name: 'Orange 60', hex: '#D72C00' }, { name: 'Orange 70', hex: '#D11B00' }, { name: 'Orange 80', hex: '#CB0A00' }, { name: 'Orange 90', hex: '#C50000' }
    ],
    blue: [
      { name: 'Blue 0', hex: '#60A5FA' }, { name: 'Blue 10', hex: '#4F96F5' }, { name: 'Blue 20', hex: '#3E87F0' },
      { name: 'Blue 30', hex: '#2D78EB' }, { name: 'Blue 40', hex: '#1C69E6' }, { name: 'Blue 50', hex: '#0B5AE1' },
      { name: 'Blue 60', hex: '#004BDC' }, { name: 'Blue 70', hex: '#003CD7' }, { name: 'Blue 80', hex: '#002DD2' }, { name: 'Blue 90', hex: '#001ECD' }
    ],
    yellow: [
      { name: 'Yellow 0', hex: '#FDE047' }, { name: 'Yellow 10', hex: '#F8D336' }, { name: 'Yellow 20', hex: '#F3C625' },
      { name: 'Yellow 30', hex: '#EEB914' }, { name: 'Yellow 40', hex: '#E9AC03' }, { name: 'Yellow 50', hex: '#E49F00' },
      { name: 'Yellow 60', hex: '#DF9200' }, { name: 'Yellow 70', hex: '#DA8500' }, { name: 'Yellow 80', hex: '#D57800' }, { name: 'Yellow 90', hex: '#D06B00' }
    ],
    red: [
      { name: 'Red 0', hex: '#F87171' }, { name: 'Red 10', hex: '#F25D5D' }, { name: 'Red 20', hex: '#EC4949' },
      { name: 'Red 30', hex: '#E63535' }, { name: 'Red 40', hex: '#E02121' }, { name: 'Red 50', hex: '#DA0D0D' },
      { name: 'Red 60', hex: '#D40000' }, { name: 'Red 70', hex: '#CE0000' }, { name: 'Red 80', hex: '#C80000' }, { name: 'Red 90', hex: '#C20000' }
    ],
    lime: [
      { name: 'Lime 0', hex: '#A3E635' }, { name: 'Lime 10', hex: '#94D826' }, { name: 'Lime 20', hex: '#85CA17' },
      { name: 'Lime 30', hex: '#76BC08' }, { name: 'Lime 40', hex: '#67AE00' }, { name: 'Lime 50', hex: '#58A000' },
      { name: 'Lime 60', hex: '#499200' }, { name: 'Lime 70', hex: '#3A8400' }, { name: 'Lime 80', hex: '#2B7600' }, { name: 'Lime 90', hex: '#1C6800' }
    ],
    magenta: [
      { name: 'Magenta 0', hex: '#E879F9' }, { name: 'Magenta 10', hex: '#E065F4' }, { name: 'Magenta 20', hex: '#D851EF' },
      { name: 'Magenta 30', hex: '#D03DEA' }, { name: 'Magenta 40', hex: '#C829E5' }, { name: 'Magenta 50', hex: '#C015E0' },
      { name: 'Magenta 60', hex: '#B801DB' }, { name: 'Magenta 70', hex: '#B000D6' }, { name: 'Magenta 80', hex: '#A800D1' }, { name: 'Magenta 90', hex: '#A000CC' }
    ],
    softGreen: [
      { name: 'Soft Green 0', hex: '#34D399' }, { name: 'Soft Green 10', hex: '#28C78D' }, { name: 'Soft Green 20', hex: '#1CBB81' },
      { name: 'Soft Green 30', hex: '#10AF75' }, { name: 'Soft Green 40', hex: '#04A369' }, { name: 'Soft Green 50', hex: '#00975D' },
      { name: 'Soft Green 60', hex: '#008B51' }, { name: 'Soft Green 70', hex: '#007F45' }, { name: 'Soft Green 80', hex: '#007339' }, { name: 'Soft Green 90', hex: '#00672D' }
    ],
    softBlue: [
      { name: 'Soft Blue 0', hex: '#38BDF8' }, { name: 'Soft Blue 10', hex: '#2AB0F3' }, { name: 'Soft Blue 20', hex: '#1CA3EE' },
      { name: 'Soft Blue 30', hex: '#0E96E9' }, { name: 'Soft Blue 40', hex: '#0089E4' }, { name: 'Soft Blue 50', hex: '#007CDF' },
      { name: 'Soft Blue 60', hex: '#006FDA' }, { name: 'Soft Blue 70', hex: '#0062D5' }, { name: 'Soft Blue 80', hex: '#0055D0' }, { name: 'Soft Blue 90', hex: '#0048CB' }
    ],
    brown: [
      { name: 'Brown 0', hex: '#A8A29E' }, { name: 'Brown 10', hex: '#9A938E' }, { name: 'Brown 20', hex: '#8C847E' },
      { name: 'Brown 30', hex: '#7E756E' }, { name: 'Brown 40', hex: '#70665E' }, { name: 'Brown 50', hex: '#62574E' },
      { name: 'Brown 60', hex: '#54483E' }, { name: 'Brown 70', hex: '#46392E' }, { name: 'Brown 80', hex: '#382A1E' }, { name: 'Brown 90', hex: '#2A1B0E' }
    ],
  },
  greys: [
    { name: 'gray0', hex: '#101011' }, { name: 'gray5', hex: '#0D0D0F' }, { name: 'gray8', hex: '#131418' },
    { name: 'gray10', hex: '#151518' }, { name: 'gray12', hex: '#1A1C20' }, { name: 'gray15', hex: '#212327' },
    { name: 'gray20', hex: '#2B2E33' }, { name: 'gray25', hex: '#3D3D43' }, { name: 'gray30', hex: '#4E4A51' },
    { name: 'gray35', hex: '#5B585D' }, { name: 'gray40', hex: '#6B6873' }, { name: 'gray45', hex: '#7D7B86' },
    { name: 'gray50', hex: '#7A7B8E' }, { name: 'gray55', hex: '#8B8792' }, { name: 'gray60', hex: '#9A9598' },
    { name: 'gray65', hex: '#A1A3AA' }, { name: 'gray70', hex: '#AFB0B7' }, { name: 'gray75', hex: '#C5C0C3' },
    { name: 'gray80', hex: '#C6C4CF' }, { name: 'gray85', hex: '#D7D7DB' }, { name: 'gray90', hex: '#E8E5E7' },
    { name: 'gray95', hex: '#F2F2F4' }, { name: 'gray100', hex: '#FCFFCC' },
  ],
  blackTints: [5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95].map(n => ({ name: `black_tint${n}`, opacity: n })),
  whiteTints: [2,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95].map(n => ({ name: `white_tint${n}`, opacity: n })),
};

const isLight = (hex) => {
  if (!hex || hex.startsWith('rgba')) return false;
  const r = parseInt(hex.slice(1,3), 16), g = parseInt(hex.slice(3,5), 16), b = parseInt(hex.slice(5,7), 16);
  return (r * 299 + g * 587 + b * 114) / 1000 > 128;
};

function ColorBar({ name, hex, opacity, isWhite }) {
  const [copied, setCopied] = useState(false);
  const copy = () => {
    const val = opacity !== undefined ? `rgba(${isWhite ? '255,255,255' : '0,0,0'},${opacity/100})` : hex;
    navigator.clipboard.writeText(val);
    setCopied(true);
    setTimeout(() => setCopied(false), 1500);
  };
  const bg = opacity !== undefined ? `rgba(${isWhite ? '255,255,255' : '0,0,0'},${opacity/100})` : hex;
  const light = opacity !== undefined ? (isWhite ? opacity > 40 : opacity < 60) : isLight(hex);
  
  return (
    <button onClick={copy} className="w-full h-14 rounded-xl flex items-center justify-between px-5 hover:scale-[1.02] transition-transform" style={{ backgroundColor: bg, border: '1px solid rgba(128,128,128,0.1)' }}>
      <span className={`text-sm font-semibold ${light ? 'text-black/80' : 'text-white/80'}`}>{name}</span>
      <div className="flex items-center gap-2">
        {copied && <Check size={14} className={light ? 'text-black/60' : 'text-white/60'} />}
        <span className={`text-xs font-mono ${light ? 'text-black/50' : 'text-white/50'}`}>{opacity !== undefined ? `${opacity}%` : hex}</span>
      </div>
    </button>
  );
}

function ColorColumn({ title, colors }) {
  return (
    <div>
      <h4 className="text-sm font-semibold text-white/60 mb-3">{title}</h4>
      <div className="space-y-1">
        {colors.map((c, i) => <ColorBar key={i} name={c.name} hex={c.hex} opacity={c.opacity} />)}
      </div>
    </div>
  );
}

function Section({ title, children, theme }) {
  return (
    <section className="mb-16">
      <h2 className={`text-2xl font-bold tracking-tight mb-8 ${theme?.text || 'text-white'}`}>{title}</h2>
      {children}
    </section>
  );
}

export default function App() {
  const [activeTab, setActiveTab] = useState('brand');
  const [darkMode, setDarkMode] = useState(true);
  const tabs = ['brand', 'saturated', 'alpha', 'greys', 'typography'];

  const theme = {
    bg: darkMode ? '#0D0E0F' : '#F1E7D1',
    text: darkMode ? 'text-white' : 'text-black',
    textMuted: darkMode ? 'text-white/50' : 'text-black/50',
    textSubtle: darkMode ? 'text-white/40' : 'text-black/40',
    border: darkMode ? 'border-white/10' : 'border-black/10',
  };

  return (
    <div className={`min-h-screen ${theme.text}`} style={{ backgroundColor: theme.bg, fontFamily: 'system-ui, sans-serif' }}>
      <header className="sticky top-0 z-50 backdrop-blur-xl" style={{ backgroundColor: `${theme.bg}ee` }}>
        <div className="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
          <p className={`text-lg font-black tracking-tight uppercase ${theme.text}`}>OUTPUT</p>
          <nav className="flex items-center gap-6">
            {tabs.map(t => (
              <button key={t} onClick={() => setActiveTab(t)} className={`text-sm font-bold capitalize transition-all ${activeTab === t ? (darkMode ? 'text-white' : 'text-black') : (darkMode ? 'text-white/40 hover:text-white' : 'text-black/40 hover:text-black')}`}>{t}</button>
            ))}
          </nav>
          <div className="flex items-center gap-2">
            <span className={`text-xs ${theme.textMuted}`}>Light</span>
            <button onClick={() => setDarkMode(!darkMode)} className={`relative w-10 h-5 rounded-full transition-colors ${darkMode ? 'bg-white/10' : 'bg-black/10'}`}>
              <div className="absolute top-0.5 w-4 h-4 rounded-full transition-all" style={{ backgroundColor: '#E5FF00', left: darkMode ? '22px' : '2px' }} />
            </button>
            <span className={`text-xs ${theme.textMuted}`}>Dark</span>
          </div>
        </div>
      </header>

      <main className="max-w-6xl mx-auto px-6 py-10">
        {activeTab === 'brand' && (
          <>
            <Section title="Brand Colors" theme={theme}>
              <div className="grid grid-cols-2 gap-8 mb-10">
                <div>
                  <h4 className={`text-sm font-semibold ${theme.textMuted} mb-3`}>Creator</h4>
                  <button onClick={() => navigator.clipboard.writeText('#E5FF00')} className="w-40 h-40 rounded-2xl flex flex-col items-start justify-end p-4 hover:scale-[1.02] transition-transform" style={{ backgroundColor: '#E5FF00' }}>
                    <span className="text-sm font-bold text-black/80">Creator Neon</span>
                    <span className="text-xs font-mono text-black/50">#E5FF00</span>
                  </button>
                </div>
                <div>
                  <h4 className={`text-sm font-semibold ${theme.textMuted} mb-3`}>Gradients</h4>
                  {colorSystem.brand.gradients.map((g, i) => (
                    <div key={i} className="w-full h-16 rounded-xl flex items-center justify-between px-4 mb-2" style={{ background: `linear-gradient(90deg, ${g.colors[0]}, ${g.colors[1]})` }}>
                      <span className="text-sm font-bold text-black/80">{g.name}</span>
                      <span className="text-xs font-mono text-black/50">{g.colors.join(' → ')}</span>
                    </div>
                  ))}
                </div>
              </div>
              <h4 className={`text-sm font-semibold ${theme.textMuted} mb-3`}>Output 2026</h4>
              <div className="grid grid-cols-2 gap-2">
                {colorSystem.brand.output2026.map((c, i) => <ColorBar key={i} name={c.name} hex={c.hex} />)}
              </div>
            </Section>
            <Section title="Creator Neon" theme={theme}>
              <div className="grid grid-cols-2 gap-8">
                <ColorColumn title="Shades (darker)" colors={colorSystem.creatorNeon.shades} />
                <ColorColumn title="Tints (lighter)" colors={colorSystem.creatorNeon.tints} />
              </div>
            </Section>
          </>
        )}

        {activeTab === 'saturated' && (
          <Section title="Saturated Colors" theme={theme}>
            <div className="grid grid-cols-3 gap-6">
              {Object.entries(colorSystem.saturated).map(([name, colors]) => (
                <ColorColumn key={name} title={name.charAt(0).toUpperCase() + name.slice(1).replace(/([A-Z])/g, ' $1')} colors={colors} />
              ))}
            </div>
          </Section>
        )}

        {activeTab === 'alpha' && (
          <Section title="Alpha Colors" theme={theme}>
            <p className={`${theme.textMuted} text-sm mb-6`}>Colors with transparency from 100% to 10% opacity.</p>
            <div className="grid grid-cols-3 gap-6">
              {Object.entries(colorSystem.saturated).slice(0, 6).map(([name, colors]) => (
                <div key={name}>
                  <h4 className={`text-sm font-semibold ${theme.textMuted} mb-3 capitalize`}>{name}</h4>
                  <div className="space-y-1">
                    {[100, 90, 80, 70, 60, 50, 40, 30, 20, 10].map((op) => (
                      <button key={op} onClick={() => navigator.clipboard.writeText(`${colors[0].hex}${Math.round(op * 2.55).toString(16).padStart(2, '0')}`)} className="w-full h-10 rounded-lg flex items-center justify-between px-3 hover:scale-[1.02] transition-transform" style={{ backgroundColor: colors[0].hex, opacity: op / 100 }}>
                        <span className={`text-xs font-bold ${isLight(colors[0].hex) ? 'text-black/80' : 'text-white/80'}`}>{name} {op}%</span>
                        <span className={`text-xs font-mono ${isLight(colors[0].hex) ? 'text-black/50' : 'text-white/50'}`}>{op}%</span>
                      </button>
                    ))}
                  </div>
                </div>
              ))}
            </div>
          </Section>
        )}

        {activeTab === 'greys' && (
          <>
            <Section title="Greys" theme={theme}>
              <div className="grid grid-cols-2 gap-6">
                <ColorColumn title="Gray Scale" colors={colorSystem.greys} />
              </div>
            </Section>
            <Section title="Black & White Tints" theme={theme}>
              <div className="grid grid-cols-2 gap-6">
                <div>
                  <h4 className={`text-sm font-semibold ${theme.textMuted} mb-3`}>Black Tints</h4>
                  <div className="space-y-1">
                    {colorSystem.blackTints.map((t, i) => <ColorBar key={i} name={t.name} opacity={t.opacity} isWhite={false} />)}
                  </div>
                </div>
                <div>
                  <h4 className={`text-sm font-semibold ${theme.textMuted} mb-3`}>White Tints</h4>
                  <div className="space-y-1">
                    {colorSystem.whiteTints.map((t, i) => <ColorBar key={i} name={t.name} opacity={t.opacity} isWhite={true} />)}
                  </div>
                </div>
              </div>
            </Section>
          </>
        )}

        {activeTab === 'typography' && (
          <Section title="Pilat - by General Type Studio" theme={theme}>
            <p className={`${theme.textMuted} mb-10 max-w-2xl`}>Pilat is a constructed grotesque developed with a large range of weight and width variations. Its base structure, commonly called a 'superellipse' or 'Lamé curve', could be described as a circle trapped inside a box. Though the letter-shape predates the 20th century, it is mostly seen as an expression of the post World War II era—a glorifying combination of craft and technology.</p>
            <div className="space-y-6">
              {[
                { size: '94px', weight: 'Bold', label: 'Pilat 94', line: 'auto', note: 'Qty numbers' },
                { size: '24px', weight: 'Regular', label: 'Pilat 24', line: 'auto' },
                { size: '22px', weight: 'Bold', label: 'Pilat 22', line: 'auto', note: 'Bold' },
                { size: '20px', weight: 'Demi', label: 'Pilat 20', line: '40px', note: 'Demi' },
                { size: '18px', weight: 'Bold', label: 'Pilat Wide 18', line: '18px', wide: true },
                { size: '20px', weight: 'Book', label: 'Pilat 20', line: '40px' },
                { size: '18px', weight: 'Bold', label: 'Pilat 18', line: 'auto', note: 'Bold' },
                { size: '16px', weight: 'Book', label: 'Pilat 16', line: 'auto' },
                { size: '15px', weight: 'Book', label: 'Pilat 15', line: 'auto' },
                { size: '14px', weight: 'Bold', label: 'Pilat 14', line: '16px', upper: true, note: 'Bold' },
                { size: '14px', weight: 'Demi', label: 'Pilat 14', line: '16px' },
                { size: '14px', weight: 'Bold', label: 'Pilat 14', line: 'auto' },
                { size: '13px', weight: 'Bold', label: 'Pilat 13', line: '100%', titleCase: true },
                { size: '13px', weight: 'Book', label: 'Pilat 13', line: 'auto' },
                { size: '13px', weight: 'Demi', label: 'Pilat 13', line: 'auto', note: 'Demi' },
                { size: '12px', weight: 'Bold', label: 'Pilat 12', line: 'auto' },
                { size: '12px', weight: 'Demi', label: 'Pilat 12', line: '16px' },
                { size: '11px', weight: 'Bold', label: 'Pilat 11', line: '11px', upper: true, note: 'Bold' },
                { size: '11px', weight: 'Bold', label: 'Pilat 11', line: '11px' },
                { size: '11px', weight: 'Demi', label: 'Pilat 11', line: '12px' },
                { size: '11px', weight: 'Bold', label: 'Pilat Wide 11', line: 'auto', wide: true, titleCase: true },
                { size: '10px', weight: 'Demi', label: 'Pilat 10', line: 'auto' },
                { size: '10px', weight: 'Bold', label: 'Pilat 10', line: 'auto', note: 'Tooltip' },
                { size: '10px', weight: 'Demi', label: 'Pilat 10', line: '16px', underline: true, note: 'Link' },
                { size: '9px', weight: 'Demi', label: 'Pilat 9', line: 'auto', note: 'Numbers' },
              ].map((t, i) => (
                <div key={i} className={`border-b ${theme.border} pb-6`}>
                  <div className="grid grid-cols-12 gap-6 items-start">
                    <div className="col-span-3">
                      <h3 className={`text-lg font-bold ${theme.text} mb-1`}>{t.label}</h3>
                      <p className={`text-xs ${theme.textMuted}`}>Pilat {t.wide ? 'Wide ' : ''}{t.weight}</p>
                      <p className={`text-xs ${theme.textSubtle}`}>{t.size} / {t.line}</p>
                    </div>
                    <div className="col-span-9">
                      <p className={`${theme.text} ${t.upper ? 'uppercase tracking-wide' : ''} ${t.wide ? 'tracking-wider' : ''} ${t.underline ? 'underline' : ''}`} style={{ fontSize: t.size, lineHeight: t.line === 'auto' || t.line === '100%' ? 'normal' : t.line, fontWeight: t.weight === 'Bold' ? 700 : t.weight === 'Demi' ? 600 : 400 }}>
                        {t.upper ? 'THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG.' : t.titleCase ? 'The Quick Brown Fox Jumps Over The Lazy Dog.' : 'The quick brown fox jumps over the lazy dog.'}
                      </p>
                      {t.note && <p className={`text-xs ${theme.textSubtle} mt-2`}>{t.note}</p>}
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </Section>
        )}
      </main>
    </div>
  );
}
